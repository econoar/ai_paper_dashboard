{% extends "base.html" %}

{% block content %}
  <h1>Bookmarked Papers</h1>
  <table class="table table-striped table-bordered" id="bookmarksTable">
    <thead>
      <tr>
        <th>Title</th>
        <th>Tags</th>
        <th>Published</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <!-- Bookmark data will be inserted via JavaScript -->
    </tbody>
  </table>
  <a href="{{ url_for('index') }}" class="btn btn-secondary">Back to Papers</a>

  <script>
    $(document).ready(function(){
      var bookmarks = JSON.parse(localStorage.getItem('bookmarksData')) || [];
      var tbody = $("#bookmarksTable tbody");
      tbody.empty();
      if (bookmarks.length === 0) {
          tbody.append("<tr><td colspan='4'>No bookmarks yet.</td></tr>");
      } else {
          bookmarks.forEach(function(paper){
              var row = "<tr>" +
                  "<td>" + paper.title + "</td>" +
                  "<td>" + (paper.tags && paper.tags.length > 0 ? paper.tags.join(", ") : "N/A") + "</td>" +
                  "<td>" + paper.published + "</td>" +
                  "<td>" +
                    "<a href='" + paper.link + "' target='_blank' class='btn btn-info btn-sm mr-2'><i class='fas fa-external-link-alt'></i> arXiv</a>" +
                    "<a href='" + paper.pdf_link + "' target='_blank' class='btn btn-primary btn-sm mr-2'><i class='fas fa-file-pdf'></i> Open PDF</a>" +
                    "<a href='/summarize/" + paper.id + "' class='btn btn-success btn-sm'><i class='fas fa-lightbulb'></i> Summarize</a>" +
                  "</td>" +
                  "</tr>";
              tbody.append(row);
          });
      }
    });
  </script>
{% endblock %}